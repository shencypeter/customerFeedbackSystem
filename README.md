# 提問單系統（Customer Feedback / Inquiry System）

本專案為一套內部使用的「提問單／回饋單系統」，用於集中管理問題提問、回覆討論與附件紀錄，並依模組（小組）進行權限控管與 Email 通知。

本系統不包含電子簽核流程；電子簽核為獨立之 Python 系統，僅於必要時整合。

---

## 一、系統初始化與安裝

### 1. 建立資料庫
- 請先執行專案提供之 DB Script 建立資料表 (SQL Server)
- 目前規劃為：
  - **一套系統對應一個資料庫**
  - 不與其他系統共用 DB 或 Schema

### 2. 設定資料庫連線
- 於 `appsettings.json` 中設定 Connection String
- 指向該提問單系統專用資料庫

---

## 二、使用者與權限設定

### 1. 系統內部使用者
- 系統內建三種內部角色（依實際設定）
- 用於：
  - 處理提問
  - 回覆留言
  - 管理議題狀態

### 2. 客戶端使用者
- 客戶端使用者可建立提問單
- 需設定客戶端 Email
- Email 將作為通知與回覆提醒用途



---

## 三、模組（問題分類）與通知規則

### 1. 模組設定
- 每一筆提問單必須歸屬於一個模組
- 模組通常對應一個處理小組或業務單位

### 2. Email 通知規則
- Email 通知僅發送給：
  - 該提問單所屬模組的小組成員
- 不進行跨模組通知
- 避免無關人員收到系統信件

---

## 四、核心功能說明

### FeedbackController（系統主體）
提供以下功能：
- 提問單列表瀏覽
- 條件搜尋
- 資料匯出
- 新增提問單（提出新的議題）

---

## 五、新增提問單（我要提問）

### 1. 提問內容
- 使用者需輸入：
  - 主旨
  - 問題內容
- 支援上傳檔案附件

### 2. 編輯器
- 問題內容使用 **TinyMCE HTML 編輯器**
- 支援格式化文字與內容呈現

---

## 六、回覆與留言機制

### 1. 回覆內容
- 可輸入回覆文字
- 可附加檔案附件

### 2. 結案設定
- 回覆時可選擇是否將議題設為「結案」
- 若設定結案：
  - 系統會自動寫入結案日期（系統當下時間）

### 3. 議題狀態行為
- 系統 **不鎖定已結案議題**
- 若後續新增回覆：
  - 可重新開啟議題
- 議題狀態依最新回覆內容調整

---

## 七、提問單生命週期（概念）

1. 使用者建立提問單
2. 系統與模組成員收到通知
3. 多次回覆與留言（可含附件）
4. 任一回覆可設定結案
5. 新回覆可再次開啟議題
6. 全程保留歷史紀錄

---

## 八、注意事項

- 附件大小與格式限制依系統設定為準
- Email 發送需正確設定 SMTP 相關參數
- 刪除行為依系統實作（是否實體刪除）

---

## 九、系統邊界說明

- 本系統僅負責提問單與回覆管理
- 不包含：
  - 多關卡簽核
  - 簽核順序或代理邏輯
- 電子簽核流程由獨立 Python 系統處理

---


